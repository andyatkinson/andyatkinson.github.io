---
layout: post
title: "Sin City Ruby 2024"
tags: [Ruby on Rails, conferences]
date: 2024-03-25
comments: true
---

I’ve just returned from Las Vegas, NV where [Sin City Ruby 2024](https://www.sincityruby.com/) was held at the Tropicana hotel.

This was a fun smaller gathering of Ruby programmers in the desert, put on by Jason Swett ([Code with Jason](https://www.codewithjason.com/)) for the second time following the successful 2022 iteration.

While the goals at conferences include learning some new things, smaller conferences like this provide a great opportunity to more people one-on-one, creating new connections or strengthening old ones. The sunny 70s Spring weather in Las Vegas helped too!

![Presenting at Sin City Ruby 2024](/assets/images/posts/2024/scr-1.jpg)
<small>Andrew Atkinson Presenting at Sin City Ruby 2024. Photo credit: <a href=”https://www.ombulabs.com/”>Ernesto</a>.</small>


## Presenting

This time around I was fortunate to present “Mastering Query Performance with PostgreSQL and Active Record,” which was a lot of fun. Since this wasn’t recorded, I decided to do an earlier version of a talk I’ll be giving at [PgDay Chicago 2024](https://2024.pgdaychicago.org/) April 26th, with a little more focus on the Rails and Active Record side of things.

The presentation started from some Active Record queries from Rideshare, that would be related to efficiently finding highly rated drivers, and dispatching rides to them. You could imagine these queries running in high volume in a core “dispatcher” loop as new rides are requested.

First we consolidated the queries into a single SQL query which I explained would be more efficient and possibly easier to optimize. From there I showed how I go about analyzing the tables, fields, and query conditions to design indexes. I iterated through around a half dozen indexes before landing on some good ones, trying them out with the planner.

The main table had 50 million rows, and we observed a 99% query execution time from the cached (buffer cache) original execution time of 350ms with no indexes added. I explained how I had a “happy accident” a bit in trying out ordered data, and saw a huge reduction as the plan changed and leveraged the PostgreSQL 16 “incremental sort” capabilities. I’ll focus more on the query plan details for the PgDay Chicago version.

![Presenting at Sin City Ruby 2024](/assets/images/posts/2024/scr-2.jpg)
<small>Andrew Atkinson Presenting at Sin City Ruby 2024. Photo credit: Ernesto.</small>


## Feedback

I got a lot of great feedback in person after the presentation. I even had someone (I missed their name) start to recommend “High Performance PostgreSQL for Rails” to me before I explained “that’s my book.” We had a nice little chuckle about that. Since I work independently now, it’s even more fulfilling now to hear directly from some people that enjoyed the presentation or the book.

> I was absolutely floored you were able to get the performance of that query down to ~3ms, like... completely blown away. Amazing work.
<cite>- Cameron</cite>

Thank you Cameron! Cameron and Dana and I were able to have lunch on the second day of the conference and we chatted about loads of things related to databases, SQL, indexes, and software teams.


## Sin City Network and Podcasts

Attending this conference in 2022 turned out to be a great investment in building new connections for my career. Besides that, Jason attracts some consulting clients, and forming relationships there can lead to new consulting engagements.

As I worked on my book over the last 2 years, and started to more heavily promote it last year on podcasts, I realized so many of my newer connections can be traced back to the 2022 conference. Here’s a list!

### Brittany Murphy - [The Ruby on Rails Podcast Episode](https://www.therubyonrailspodcast.com/486)
While Brittany is no longer a co-host of the podcast, she had an epic tenure serving as a co-host for years. I was really honored to be one of the last guests she had before signing off. Brittany and I met during a 5k fun run at the 2022 edition, which made it easier for me to reach out and pitch the podcast on an episode.

### Jason Charnes - [Remote Ruby Episode](http://andyatkinson.com/blog/2024/01/05/Remote-Ruby-unleashing-power-postgresql-andrew-atkinson)
Along with Andrew Mason and Chris Oliver, Jason Charnes and I have become friends over the last couple of years! All three of them have been supporters of my book, buying it and publicly praising it, and this has been super helpful and appreciated! I was honored to be on Remote Ruby a few months back, and the episode was a lot of fun.

### Drew Bragg - [Code and the Coding Coders Episode](http://andyatkinson.com/blog/2023/08/22/code-coding-coders-podcast-drew-bragg)
I met Drew at the 2022 Sin City Ruby, and have been an admirer of his podcast format with three questions, and the depth of the conversations he and the guests get into. I really enjoyed our episode and Drew has been a big supporter of my book efforts as well, praising publicly and in-person at the conference. Thanks Drew!

### Robby Russell - [Maintainable Episode](http://andyatkinson.com/blog/2024/02/19/maintainable-podcast-robby-russell-andrew-atkinson-maintainable-databases)

Robby and I hadn't met in person, but we did have the chance to meet a bit this time around. I'm a big fan of this podcast which focuses on the maintenance of software, and was honored to appear as a guest recently. We explored maintenance topics for a PostgreSQL database, and I really enjoyed discussing software maintenance as well. I wrote a blog post for the episode that went into greater detail.

### Jason Swett - Multiple Episodes

Jason and I have met for a couple of episodes for Code With Jason, and I really appreciate the support and promotion that Jason has helped me with. One of those podcast episodes lead directly to a client consulting engagement, which was a nice bonus. We even flipped the script once, and I had the chance to interview Jason on consulting topics. You can find links to the Code With Jason episodes and more on my Speaking Opportunities page: <http://andyatkinson.com/speaking-opportunities>

![Presenting at Sin City Ruby 2024](/assets/images/posts/2024/scr-3.jpg)
<small>Andrew Atkinson Presenting at Sin City Ruby 2024. Photo credit: <a href=”https://www.ombulabs.com/”>Ernesto</a>.</small>

## Rideshare and Book Sales

By using queries and examples from [Rideshare](https://github.com/andyatkinson/rideshare), it was a nice way to promote the app as well, which I genuinely hope could be useful even without buying the book. Over the conference, we got a few more stars and forks on the repo.

We got a little spike of around 20 book sales over the couple of days for the conference. Hopefully some folks took advantage of the “SinCityPostgreSQL” 35% off discount code for the ebook.


## Follow-on Questions

I was very perceptive to the kinds of questions or observations that Ruby developers might have about PostgreSQL topics. A large emphasis of my book is to help raise awareness of the amazing capabilities that PostgreSQL has that might not be known in the Ruby and Rails communities.

I jotted down some of those topics in a tweet, and you can expect a future post that expands these out further. Some of the topics were covering indexes, various topics on sorted data and sorting data in queries, and how to view pages and buffers accessed for a given query. Stay tuned! 

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Very fun to show off the <a href="https://twitter.com/hashtag/PostgreSQL?src=hash&amp;ref_src=twsrc%5Etfw">#PostgreSQL</a> query planner and indexing capabilities at <a href="https://twitter.com/hashtag/SinCityRuby?src=hash&amp;ref_src=twsrc%5Etfw">#SinCityRuby</a>. Some folks didn’t know about Covering indexes, benefits of sorted data, viewing buffers/pages accessed, or how extensible PostgreSQL is and the hundreds of available extensions.</p>&mdash; Andrew Atkinson (@andatki) <a href="https://twitter.com/andatki/status/1771338620164817031?ref_src=twsrc%5Etfw">March 23, 2024</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

## Hanging Out

The day before the conference Vladimir rented a car from the airport and drove us out to the Hoover Dam area. We stopped in the nearby town and had coffee. I hadn’t been outside the “Strip” area, so it was cool to spend time with conference friends and see a bit more of the desert landscape.

![Presenting at Sin City Ruby 2024](/assets/images/posts/2024/scr-5-1.jpg)
<small>Exploring old train cars: Andrew, Dominic, Jeremy, Vladimir (not pictured: Irina). Sin City Ruby 2024. Photo credit: <a href="https://evilmartians.com">Irina</a>.</small>

![Presenting at Sin City Ruby 2024](/assets/images/posts/2024/scr-5-2.jpg)
<small>Exploring Hoover Dam tunnels: Andrew and Dominic. Photo credit: <a href="https://evilmartians.com">Irina</a>.</small>


## Thanks

I really enjoyed the conference and thanks again to Jason Swett for organizing it. I appreciate all the feedback on the presentation from the attendees. Please get in touch if I can help out with anything else, or if you have additional feedback.

Until next time.
